<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>For You ü§ç</title>

<style>
html,body{
  margin:0;
  height:100%;
  background:#111;
  font-family:system-ui;
  overflow:hidden;
}

.app{
  position:relative;
  width:100vw;
  height:100vh;
  overflow:hidden;
}

/* Background */
.bg{
  position:absolute;
  inset:0;
  background: radial-gradient(circle at 50% 20%, #ffe6f0, #e6a9c8 60%, #b983a6);
  animation: glow 6s ease-in-out infinite alternate;
}
@keyframes glow{
  from{filter:brightness(1)}
  to{filter:brightness(1.15)}
}

/* Canvas */
canvas{
  position:absolute;
  inset:0;
  pointer-events:none;
}

/* Layer */
.layer{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  color:white;
  padding:20px;
}

/* Foto bulat */
.circle{
  width:min(75vw,320px);
  height:min(75vw,320px);
  border-radius:50%;
  overflow:hidden;
  border:5px solid rgba(255,255,255,.8);
  box-shadow:0 0 40px rgba(255,150,200,.7);
  transition:opacity 1s ease;
}

.circle img{
  width:100%;
  height:100%;
  object-fit:cover;
}

/* Panel text */
.panel{
  position:absolute;
  bottom:0;
  left:0;
  right:0;
  padding:20px;
  background:rgba(0,0,0,.5);
  backdrop-filter:blur(8px);
  max-height:45vh;
  overflow-y:auto;
}

.text{
  font-size:15px;
  line-height:1.7;
  white-space:pre-wrap;
}
</style>
</head>

<body>

<div class="app">
<div class="bg"></div>
<canvas id="fx"></canvas>

<div class="layer" id="opening">
  <h2>From me ‚Üí For you ü§ç</h2>
  <small>Tap layar untuk mulai</small>
</div>

<div class="layer" id="slide" style="display:none">
  <div class="circle">
    <img id="photo" src="foto1.jpg">
  </div>

  <div class="panel">
    <div id="typed" class="text"></div>
  </div>
</div>

<audio id="music" src="lagu.mp3" loop playsinline preload="auto"></audio>
</div>

<script>
/* ===== CANVAS HEART FLOATING ===== */
const canvas = document.getElementById("fx");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
resize();
addEventListener("resize",resize);

const hearts = Array.from({length:50},()=>({
  x:Math.random()*canvas.width,
  y:Math.random()*canvas.height,
  size:Math.random()*12+8,
  speed:Math.random()*1+0.5,
  alpha:Math.random()*0.5+0.5
}));

function drawHeart(x,y,size,alpha){
  ctx.save();
  ctx.translate(x,y);
  ctx.scale(size/20,size/20);
  ctx.globalAlpha = alpha;
  ctx.beginPath();
  ctx.moveTo(0,0);
  ctx.bezierCurveTo(0,-10,-20,-10,-20,5);
  ctx.bezierCurveTo(-20,20,0,30,0,40);
  ctx.bezierCurveTo(0,30,20,20,20,5);
  ctx.bezierCurveTo(20,-10,0,-10,0,0);
  ctx.fillStyle="#ff9ecf";
  ctx.fill();
  ctx.restore();
}

function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  hearts.forEach(h=>{
    h.y -= h.speed;
    if(h.y < -40){
      h.y = canvas.height + 40;
      h.x = Math.random()*canvas.width;
    }
    drawHeart(h.x,h.y,h.size,h.alpha);
  });

  requestAnimationFrame(animate);
}
animate();

/* ===== FOTO + TEXT + MUSIC ===== */

const photos = [
  "foto1.jpg",
  "foto2.jpg",
  "foto3.jpg",
  "foto4.jpg",
  "foto5.jpg"
];

const text = `first, terima kasih ya sayang sudah menemani setiap suka-duka kehidupan aku.
lewat hal-hal kecil yang bahkan aku sendiri ga sadar, contohnya kaya ada kamu didalamnya.

mungkin keliatan ga bermakna ya? tapi serius, hari ini bukan sekedar hari kasih sayang.
tapi juga salah satu hari dimana aku udah ga sabar mau rayain hari ini, dimana aku ngerayain rasa syukur karena semesta pernah baik banget, ngenalin aku ke kamu.

aku ngerayain kesabaran kamu, cara kamu stay even when things aren't easy, dan cara kamu hadir tanpa banyak janji tapi selalu nyata.

being with you taught me that love doesn't have to be loud.
sometimes it's quiet, warm, and steady like you holding my hand without saying anything, but somehow everything feels okay.

so today, i celebrate you. us.
not just on valentine, but on every ordinary day that turns special just because you're there.

thank you for choosing me, for staying, and for being the love i never knew i needed this much.

still with you, always ü§ç`;

const opening = document.getElementById("opening");
const slide   = document.getElementById("slide");
const photo   = document.getElementById("photo");
const typed   = document.getElementById("typed");
const music   = document.getElementById("music");

let p=0;

/* slideshow */
function nextPhoto(){
  photo.style.opacity=0;
  setTimeout(()=>{
    photo.src = photos[p%photos.length];
    photo.style.opacity=1;
    p++;
  },500);
}
setInterval(nextPhoto,5000);

/* typing */
function typeText(){
  let i=0;
  const iv=setInterval(()=>{
    typed.textContent+=text[i++]||"";
    typed.scrollTop=typed.scrollHeight;
    if(i>=text.length) clearInterval(iv);
  },20);
}

/* start (aman untuk HP) */
opening.addEventListener("click",start);
opening.addEventListener("touchstart",start);

async function start(){
  opening.style.display="none";
  slide.style.display="flex";

  try{
    await music.play();
  }catch{
    music.load();
    music.play();
  }

  typeText();
}
</script>

</body>
</html>
