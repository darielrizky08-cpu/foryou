<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Valentine</title>

<style>
html,body{
  margin:0;
  height:100%;
  background:#111;
  overflow:hidden;
  font-family:system-ui;
}

.app{
  position:relative;
  width:100vw;
  height:100vh;
}

canvas{
  position:absolute;
  inset:0;
  pointer-events:none; /* ‚≠ê penting */
}

.layer{
  position:absolute;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  color:white;
  text-align:center;
  z-index:2;
}

/* foto */
.circle{
  width:260px;
  height:260px;
  border-radius:50%;
  overflow:hidden;
  border:5px solid white;
}
.circle img{
  width:100%;
  height:100%;
  object-fit:cover;
}

.panel{
  position:absolute;
  bottom:0;
  left:0;
  right:0;
  background:rgba(0,0,0,.6);
  padding:18px;
  max-height:45vh;
  overflow:auto;
}

.text{
  white-space:pre-wrap;
  font-size:14px;
}
</style>
</head>

<body>

<div class="app">

<canvas id="fx"></canvas>

<div id="opening" class="layer">
  <h2>Tap untuk mulai ü§ç</h2>
</div>

<div id="slide" class="layer" style="display:none">
  <div class="circle">
    <img id="photo" src="foto1.jpg">
  </div>
  <div class="panel">
    <div id="typed" class="text"></div>
  </div>
</div>

<audio id="music" src="lagu.mp3" loop></audio>

</div>

<script>
/* ================= FIX ELEMENT ================= */
const canvas = document.getElementById("fx");
const ctx = canvas.getContext("2d");

const opening = document.getElementById("opening");
const slide = document.getElementById("slide");
const photo = document.getElementById("photo");
const typed = document.getElementById("typed");
const music = document.getElementById("music");

/* ================= CANVAS ================= */
function resize(){
 canvas.width=innerWidth;
 canvas.height=innerHeight;
}
resize();
addEventListener("resize",resize);

const hearts = Array.from({length:30},()=>({
 x:Math.random()*canvas.width,
 y:Math.random()*canvas.height,
 s:Math.random()*1+0.5
}));

function draw(){
 ctx.clearRect(0,0,canvas.width,canvas.height);
 hearts.forEach(h=>{
   h.y-=h.s;
   if(h.y<0) h.y=canvas.height;
   ctx.fillStyle="#ffc2da";
   ctx.beginPath();
   ctx.arc(h.x,h.y,3,0,6.28);
   ctx.fill();
 });
 requestAnimationFrame(draw);
}
draw();

/* ================= SLIDES ================= */
const photos=["foto1.jpg","foto2.jpg","foto3.jpg","foto4.jpg","foto5.jpg"];
let idx=0;

setInterval(()=>{
 photo.src=photos[idx%photos.length];
 idx++;
},5000);

/* ================= TEXT ================= */
const text="Still with you, always ü§ç";

function typeText(){
 let i=0;
 const iv=setInterval(()=>{
   typed.textContent+=text[i++]||"";
   if(i>=text.length) clearInterval(iv);
 },40);
}

/* ================= START ================= */
function start(){
 opening.style.display="none";
 slide.style.display="flex";

 music.play().catch(()=>{});
 typeText();
}

opening.addEventListener("click",start,{once:true});
opening.addEventListener("touchstart",start,{once:true});
</script>

</body>
</html>
