<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>For You ü§ç</title>

<style>
html,body{
  margin:0;
  height:100%;
  background:#000;
  font-family:system-ui;
  overflow:hidden;
}

.app{
  position:relative;
  width:100vw;
  height:100vh;
  overflow:hidden;
}

/* Background */
.bg{
  position:absolute;
  inset:0;
  background: radial-gradient(circle at 50% 20%, #ffe6f0, #e6a9c8 60%, #b983a6);
  animation: glow 6s ease-in-out infinite alternate;
  transition:opacity 2s ease;
}
@keyframes glow{
  from{filter:brightness(1)}
  to{filter:brightness(1.15)}
}

canvas{
  position:absolute;
  inset:0;
  pointer-events:none;
}

.layer{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  color:white;
  padding:20px;
}

.circle{
  width:min(75vw,320px);
  height:min(75vw,320px);
  border-radius:50%;
  overflow:hidden;
  border:5px solid rgba(255,255,255,.8);
  box-shadow:0 0 40px rgba(255,150,200,.7);
}

.circle img{
  width:100%;
  height:100%;
  object-fit:cover;
  opacity:1;
  transition:opacity 1s ease, transform 6s ease;
}

.panel{
  position:absolute;
  bottom:0;
  left:0;
  right:0;
  padding:20px;
  background:rgba(0,0,0,.5);
  backdrop-filter:blur(8px);
  max-height:45vh;
  overflow-y:auto;
}

.text{
  font-size:15px;
  line-height:1.7;
  white-space:pre-wrap;
  opacity:1;
  transition:opacity .8s ease;
}

/* Ending */
.ending{
  position:absolute;
  inset:0;
  background:#000;
  display:flex;
  justify-content:center;
  align-items:center;
  color:white;
  font-size:22px;
  opacity:0;
  transition:opacity 2s ease;
}
</style>
</head>

<body>
<div class="app">
<div class="bg" id="bg"></div>
<canvas id="fx"></canvas>

<div class="layer" id="opening">
  <h2>From me ‚Üí For you ü§ç</h2>
  <small>Tap layar untuk mulai</small>
</div>

<div class="layer" id="slide" style="display:none">
  <div class="circle">
    <img id="photo" src="foto1.jpg">
  </div>
  <div class="panel">
    <div id="typed" class="text"></div>
  </div>
</div>

<div class="ending" id="ending">
  Still with you, always ü§ç
</div>

<audio id="music" src="lagu.mp3" playsinline preload="auto"></audio>
</div>

<script>
/* ===== HEART FLOAT ===== */
const canvas = document.getElementById("fx");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
resize();
addEventListener("resize",resize);

let hearts = Array.from({length:40},()=>createHeart());

function createHeart(){
  return{
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    size:Math.random()*12+8,
    speed:Math.random()*1+0.5,
    alpha:Math.random()*0.5+0.5
  }
}

function drawHeart(x,y,size,alpha){
  ctx.save();
  ctx.translate(x,y);
  ctx.scale(size/20,size/20);
  ctx.globalAlpha = alpha;
  ctx.beginPath();
  ctx.moveTo(0,0);
  ctx.bezierCurveTo(0,-10,-20,-10,-20,5);
  ctx.bezierCurveTo(-20,20,0,30,0,40);
  ctx.bezierCurveTo(0,30,20,20,20,5);
  ctx.bezierCurveTo(20,-10,0,-10,0,0);
  ctx.fillStyle="#ff9ecf";
  ctx.fill();
  ctx.restore();
}

function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  hearts.forEach(h=>{
    h.y -= h.speed;
    if(h.y < -40){
      Object.assign(h, createHeart(), {y:canvas.height+40});
    }
    drawHeart(h.x,h.y,h.size,h.alpha);
  });
  requestAnimationFrame(animate);
}
animate();

/* ===== CONTENT ===== */

const photos=["foto1.jpg","foto2.jpg","foto3.jpg","foto4.jpg","foto5.jpg"];

const texts=[
`first, terima kasih ya sayang sudah menemani setiap suka-duka kehidupan aku.
lewat hal-hal kecil yang bahkan aku sendiri ga sadar, contohnya kaya ada kamu didalamnya.`,

`mungkin keliatan ga bermakna ya? tapi serius, hari ini bukan sekedar hari kasih sayang.
tapi juga salah satu hari dimana aku udah ga sabar mau rayain hari ini, dimana aku ngerayain rasa syukur karena semesta pernah baik banget, ngenalin aku ke kamu.`,

`aku ngerayain kesabaran kamu, cara kamu stay even when things aren't easy,
dan cara kamu hadir tanpa banyak janji tapi selalu nyata.`,

`being with you taught me that love doesn't have to be loud.
sometimes it's quiet, warm, and steady like you holding my hand without saying anything, but somehow everything feels okay.`,

`so today, i celebrate you. us.
not just on valentine, but on every ordinary day that turns special just because you're there.

thank you for choosing me, for staying, and for being the love i never knew i needed this much.`
];

const opening=document.getElementById("opening");
const slide=document.getElementById("slide");
const photo=document.getElementById("photo");
const typed=document.getElementById("typed");
const music=document.getElementById("music");
const ending=document.getElementById("ending");
const bg=document.getElementById("bg");

let index=0;
let interval;

/* TEXT FADE */
function showText(content){
  typed.style.opacity=0;
  setTimeout(()=>{
    typed.textContent=content;
    typed.scrollTop=0;
    typed.style.opacity=1;
  },500);
}

/* SLIDE */
function nextSlide(){
  if(index>=photos.length){
    finish();
    return;
  }

  photo.style.opacity=0;

  setTimeout(()=>{
    photo.src=photos[index];
    photo.style.transform="scale(1.08)";
    photo.style.opacity=1;
    showText(texts[index]);
    index++;
  },800);
}

/* ENDING */
function finish(){
  clearInterval(interval);

  // heart burst
  for(let i=0;i<80;i++){
    hearts.push(createHeart());
  }

  setTimeout(()=>{
    bg.style.opacity=0;
    slide.style.opacity=0;
    ending.style.opacity=1;
  },3000);
}

/* START */
async function start(){
  opening.style.display="none";
  slide.style.display="flex";

  await music.play().catch(()=>{});

  nextSlide();

  const baseTime = music.duration / photos.length * 1000;
  interval=setInterval(nextSlide, baseTime+1500);
}

opening.addEventListener("click",start);
opening.addEventListener("touchstart",start);
</script>

</body>
</html>
