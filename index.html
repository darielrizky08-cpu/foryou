<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
<title>Valentine</title>
<script>

<style>
<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
<title>Valentine</title>
<script>
/* =========================
   PATCH FIX (TIDAK UBAH KODE ASLI)
========================= */

/* 1. biar canvas tidak blok klik */
document.querySelector("canvas").style.pointerEvents="none";

/* 2. ambil element dengan aman */
const openingEl = document.getElementById("opening");
const slideEl   = document.getElementById("slide");
const closingEl = document.getElementById("closing");
const photoEl   = document.getElementById("photo");
const typedEl   = document.getElementById("typed");
const musicEl   = document.getElementById("music");
const flowerEl  = document.getElementById("flower");


/* 3. paksa klik + sentuh mobile */
function startFix(){

  if(musicEl){
    musicEl.muted=false;
    musicEl.play().catch(()=>{});
  }

  if(openingEl) openingEl.style.display="none";
  if(slideEl)   slideEl.style.display="flex";

  /* ketik ulang text biar muncul di HP */
  if(typedEl){
    const text = typedEl.textContent || typedEl.innerText;
    typedEl.textContent="";
    let i=0;
    const iv=setInterval(()=>{
      typedEl.textContent+=text[i++]||"";
      if(i>=text.length) clearInterval(iv);
    },18);
  }
}

openingEl?.addEventListener("click",startFix);
openingEl?.addEventListener("touchstart",startFix);


/* 4. jaga canvas ukuran HP */
const canvas=document.getElementById("fx");
if(canvas){
  const ctx=canvas.getContext("2d");
  function resize(){
    canvas.width=innerWidth;
    canvas.height=innerHeight;
  }
  resize();
  addEventListener("resize",resize);
}
</script>

<style>
html,body{
  margin:0;
  height:100%;
  background:#111;
  font-family:system-ui;
  overflow:hidden;
}

.app{
  position:relative;
  width:100vw;
  height:100vh;
  overflow:hidden;
}

/* ======================
   BACKGROUND GLOW
====================== */
.bg{
  position:absolute;
  inset:0;
  background: radial-gradient(circle at 50% 20%, #ffe6f0, #e6a9c8 60%, #b983a6);
  animation: glow 6s ease-in-out infinite alternate;
}
@keyframes glow{
  from{filter:brightness(1)}
  to{filter:brightness(1.15)}
}

/* CANVAS */
canvas{
  position:absolute;
  inset:0;
}

/* LAYER */
.layer{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  color:white;
  padding:20px;
}

/* FOTO */
.circle{
  width:min(75vw,320px);
  height:min(75vw,320px);
  border-radius:50%;
  overflow:hidden;
  border:5px solid rgba(255,255,255,.8);
  box-shadow:0 0 40px rgba(255,150,200,.7);
  transition:opacity 1s;
}

.circle img{
  width:100%;
  height:100%;
  object-fit:cover;
}

/* PANEL */
.panel{
  position:absolute;
  bottom:0;
  left:0;
  right:0;
  padding:20px;
  background:rgba(0,0,0,.5);
  backdrop-filter:blur(8px);
  max-height:45vh;
  overflow-y:auto;
}

.text{
  font-size:15px;
  line-height:1.7;
  white-space:pre-wrap;
}

/* FLOWER */
.flower{
  position:relative;
  width:200px;
  height:200px;
}

.petal{
  position:absolute;
  width:60px;
  height:24px;
  border-radius:50%;
  background:linear-gradient(135deg,#ff9fc4,#ffd7ea);
  transform-origin:center;
  transition:transform .6s ease;
}

.center{
  position:absolute;
  top:50%;left:50%;
  width:36px;height:36px;
  border-radius:50%;
  background:#ffe3a3;
  transform:translate(-50%,-50%);
}
</style>
</head>

<body>

<div class="app">
<div class="bg"></div>
<canvas id="fx"></canvas>

<div class="layer" id="opening">
  <h2>From me ‚Üí For you ü§ç</h2>
  <small>Tap layar untuk mulai</small>
</div>

<div class="layer" id="slide" style="display:none">
  <div class="circle">
    <img id="photo" src="foto1.jpg">
  </div>
  <div class="panel">
    <div id="typed" class="text"></div>
  </div>
</div>

<div class="layer" id="closing" style="display:none">
  <div id="flower" class="flower"></div>
  <h3>Still with you, always ü§ç</h3>
</div>

<audio id="music" src="lagu.mp3" loop playsinline></audio>
</div>

<script>
/* ======================
   CANVAS HEART + STARS
====================== */
const canvas=fx;
const ctx=canvas.getContext("2d");

function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}
resize();
addEventListener("resize",resize);

const hearts=Array.from({length:40},()=>({
 x:Math.random()*canvas.width,
 y:Math.random()*canvas.height,
 s:Math.random()*1+0.4
}));

const stars=Array.from({length:40},()=>({
 x:Math.random()*canvas.width,
 y:Math.random()*canvas.height,
 a:Math.random()
}));

function heart(x,y,size){
 ctx.beginPath();
 ctx.moveTo(x,y);
 ctx.bezierCurveTo(x,y-3*size,x-5*size,y-3*size,x-5*size,y);
 ctx.bezierCurveTo(x-5*size,y+3*size,x,y+4*size,x,y+6*size);
 ctx.bezierCurveTo(x,y+4*size,x+5*size,y+3*size,x+5*size,y);
 ctx.bezierCurveTo(x+5*size,y-3*size,x,y-3*size,x,y);
 ctx.fill();
}

function draw(){
 ctx.clearRect(0,0,canvas.width,canvas.height);

 stars.forEach(s=>{
  s.a+=0.02;
  ctx.globalAlpha=(Math.sin(s.a)+1)/2;
  ctx.fillStyle="white";
  ctx.fillRect(s.x,s.y,2,2);
 });

 hearts.forEach(h=>{
  h.y-=h.s;
  if(h.y<0) h.y=canvas.height;
  ctx.globalAlpha=.9;
  ctx.fillStyle="#ffb6d5";
  heart(h.x,h.y,2);
 });

 ctx.globalAlpha=1;
 requestAnimationFrame(draw);
}
draw();

/* ======================
   SLIDESHOW + TEXT
====================== */
const photos=["foto1.jpg","foto2.jpg","foto3.jpg","foto4.jpg","foto5.jpg"];

const text=`first, terima kasih ya sayang sudah menemani setiap suka-duka kehidupan aku.
lewat hal-hal kecil yang bahkan aku sendiri ga sadar, contohnya kaya ada kamu didalamnya.

mungkin keliatan ga bermakna ya? tapi serius, hari ini bukan sekedar hari kasih sayang.
tapi hari dimana aku ngerayain rasa syukur karena semesta ngenalin aku ke kamu.

being with you taught me that love doesn't have to be loud.
sometimes it's quiet, warm, and steady.

so today, i celebrate you. us.
still with you, always ü§ç`;

const photoEl=photo;
const typed=typed;
const music=music;

let p=0;

/* FOTO FADE */
function nextPhoto(){
 photoEl.style.opacity=0;
 setTimeout(()=>{
   photoEl.src=photos[p%photos.length];
   photoEl.style.opacity=1;
   p++;
 },500);
}
setInterval(nextPhoto,6000);

/* TYPE */
function typeText(){
 let i=0;
 const iv=setInterval(()=>{
  typed.textContent+=text[i++]||"";
  typed.scrollTop=typed.scrollHeight;
  if(i>=text.length) clearInterval(iv);
 },18);
}

/* FLOWER */
function buildFlower(){
 const f=flower;
 const n=10;
 const r=70;

 for(let i=0;i<n;i++){
  const p=document.createElement("div");
  p.className="petal";
  const a=(360/n)*i;
  const x=Math.cos(a*Math.PI/180)*r;
  const y=Math.sin(a*Math.PI/180)*r;
  p.style.left="50%";
  p.style.top="50%";
  p.style.transform=`translate(${x}px,${y}px) scale(0)`;
  f.appendChild(p);

  setTimeout(()=>p.style.transform=`translate(${x}px,${y}px) scale(1)`,i*120);
 }

 const c=document.createElement("div");
 c.className="center";
 f.appendChild(c);
}

/* MUSIC FADE IN */
function fadeMusic(){
 music.volume=0;
 music.play();
 const iv=setInterval(()=>{
  music.volume+=0.05;
  if(music.volume>=1) clearInterval(iv);
 },200);
}

/* START */
opening.onclick=()=>{
 opening.style.display="none";
 slide.style.display="flex";
 fadeMusic();
 typeText();

 /* total 83 detik */
 setTimeout(()=>{
   slide.style.display="none";
   closing.style.display="flex";
   buildFlower();
 },83000);
};
</script>

</body>
</html>

html,body{
  margin:0;
  height:100%;
  background:#111;
  font-family:system-ui;
  overflow:hidden;
}

.app{
  position:relative;
  width:100vw;
  height:100vh;
  overflow:hidden;
}

/* ======================
   BACKGROUND GLOW
====================== */
.bg{
  position:absolute;
  inset:0;
  background: radial-gradient(circle at 50% 20%, #ffe6f0, #e6a9c8 60%, #b983a6);
  animation: glow 6s ease-in-out infinite alternate;
}
@keyframes glow{
  from{filter:brightness(1)}
  to{filter:brightness(1.15)}
}

/* CANVAS */
canvas{
  position:absolute;
  inset:0;
}

/* LAYER */
.layer{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  color:white;
  padding:20px;
}

/* FOTO */
.circle{
  width:min(75vw,320px);
  height:min(75vw,320px);
  border-radius:50%;
  overflow:hidden;
  border:5px solid rgba(255,255,255,.8);
  box-shadow:0 0 40px rgba(255,150,200,.7);
  transition:opacity 1s;
}

.circle img{
  width:100%;
  height:100%;
  object-fit:cover;
}

/* PANEL */
.panel{
  position:absolute;
  bottom:0;
  left:0;
  right:0;
  padding:20px;
  background:rgba(0,0,0,.5);
  backdrop-filter:blur(8px);
  max-height:45vh;
  overflow-y:auto;
}

.text{
  font-size:15px;
  line-height:1.7;
  white-space:pre-wrap;
}

/* FLOWER */
.flower{
  position:relative;
  width:200px;
  height:200px;
}

.petal{
  position:absolute;
  width:60px;
  height:24px;
  border-radius:50%;
  background:linear-gradient(135deg,#ff9fc4,#ffd7ea);
  transform-origin:center;
  transition:transform .6s ease;
}

.center{
  position:absolute;
  top:50%;left:50%;
  width:36px;height:36px;
  border-radius:50%;
  background:#ffe3a3;
  transform:translate(-50%,-50%);
}
</style>
</head>

<body>

<div class="app">
<div class="bg"></div>
<canvas id="fx"></canvas>

<div class="layer" id="opening">
  <h2>From me ‚Üí For you ü§ç</h2>
  <small>Tap layar untuk mulai</small>
</div>

<div class="layer" id="slide" style="display:none">
  <div class="circle">
    <img id="photo" src="foto1.jpg">
  </div>
  <div class="panel">
    <div id="typed" class="text"></div>
  </div>
</div>

<div class="layer" id="closing" style="display:none">
  <div id="flower" class="flower"></div>
  <h3>Still with you, always ü§ç</h3>
</div>

<audio id="music" src="lagu.mp3" loop playsinline></audio>
</div>

<script>
/* ======================
   CANVAS HEART + STARS
====================== */
const canvas=fx;
const ctx=canvas.getContext("2d");

function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}
resize();
addEventListener("resize",resize);

const hearts=Array.from({length:40},()=>({
 x:Math.random()*canvas.width,
 y:Math.random()*canvas.height,
 s:Math.random()*1+0.4
}));

const stars=Array.from({length:40},()=>({
 x:Math.random()*canvas.width,
 y:Math.random()*canvas.height,
 a:Math.random()
}));

function heart(x,y,size){
 ctx.beginPath();
 ctx.moveTo(x,y);
 ctx.bezierCurveTo(x,y-3*size,x-5*size,y-3*size,x-5*size,y);
 ctx.bezierCurveTo(x-5*size,y+3*size,x,y+4*size,x,y+6*size);
 ctx.bezierCurveTo(x,y+4*size,x+5*size,y+3*size,x+5*size,y);
 ctx.bezierCurveTo(x+5*size,y-3*size,x,y-3*size,x,y);
 ctx.fill();
}

function draw(){
 ctx.clearRect(0,0,canvas.width,canvas.height);

 stars.forEach(s=>{
  s.a+=0.02;
  ctx.globalAlpha=(Math.sin(s.a)+1)/2;
  ctx.fillStyle="white";
  ctx.fillRect(s.x,s.y,2,2);
 });

 hearts.forEach(h=>{
  h.y-=h.s;
  if(h.y<0) h.y=canvas.height;
  ctx.globalAlpha=.9;
  ctx.fillStyle="#ffb6d5";
  heart(h.x,h.y,2);
 });

 ctx.globalAlpha=1;
 requestAnimationFrame(draw);
}
draw();

/* ======================
   SLIDESHOW + TEXT
====================== */
const photos=["foto1.jpg","foto2.jpg","foto3.jpg","foto4.jpg","foto5.jpg"];

const text=`first, terima kasih ya sayang sudah menemani setiap suka-duka kehidupan aku.
lewat hal-hal kecil yang bahkan aku sendiri ga sadar, contohnya kaya ada kamu didalamnya.

mungkin keliatan ga bermakna ya? tapi serius, hari ini bukan sekedar hari kasih sayang.
tapi hari dimana aku ngerayain rasa syukur karena semesta ngenalin aku ke kamu.

being with you taught me that love doesn't have to be loud.
sometimes it's quiet, warm, and steady.

so today, i celebrate you. us.
still with you, always ü§ç`;

const photoEl=photo;
const typed=typed;
const music=music;

let p=0;

/* FOTO FADE */
function nextPhoto(){
 photoEl.style.opacity=0;
 setTimeout(()=>{
   photoEl.src=photos[p%photos.length];
   photoEl.style.opacity=1;
   p++;
 },500);
}
setInterval(nextPhoto,6000);

/* TYPE */
function typeText(){
 let i=0;
 const iv=setInterval(()=>{
  typed.textContent+=text[i++]||"";
  typed.scrollTop=typed.scrollHeight;
  if(i>=text.length) clearInterval(iv);
 },18);
}

/* FLOWER */
function buildFlower(){
 const f=flower;
 const n=10;
 const r=70;

 for(let i=0;i<n;i++){
  const p=document.createElement("div");
  p.className="petal";
  const a=(360/n)*i;
  const x=Math.cos(a*Math.PI/180)*r;
  const y=Math.sin(a*Math.PI/180)*r;
  p.style.left="50%";
  p.style.top="50%";
  p.style.transform=`translate(${x}px,${y}px) scale(0)`;
  f.appendChild(p);

  setTimeout(()=>p.style.transform=`translate(${x}px,${y}px) scale(1)`,i*120);
 }

 const c=document.createElement("div");
 c.className="center";
 f.appendChild(c);
}

/* MUSIC FADE IN */
function fadeMusic(){
 music.volume=0;
 music.play();
 const iv=setInterval(()=>{
  music.volume+=0.05;
  if(music.volume>=1) clearInterval(iv);
 },200);
}

/* START */
opening.onclick=()=>{
 opening.style.display="none";
 slide.style.display="flex";
 fadeMusic();
 typeText();

 /* total 83 detik */
 setTimeout(()=>{
   slide.style.display="none";
   closing.style.display="flex";
   buildFlower();
 },83000);
};
</script>

</body>
</html>


